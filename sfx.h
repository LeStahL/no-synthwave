const char *sfx_source = "#version 130\nuniform float a,b,c,d;float e=radians(180.);float f(float g){return clamp(g,-1.,1.);}float h(float i){return smoothstep(0.,1j-3,clamp(i,0.,1j-3));}float k(float g){return sin(2.*e*mod(g,1.));}float l(float m){return 32.7*pow(2.,m/12.);}float n(float i){return 1.+.333*i;}float o(float g,float p,float q,float r,float i){return mod(i,1.)<.25?g:mod(i,1.)<.5?p:mod(i,1.)<.75?q:r;}int s=2;const float t[2]=float [2](0.,12.);const float u[2]=float [2](0.,20.571429);const float v[1]=float [1](.5833);const float w[1]=float [1](1.7144);float x,y,z;const float A=44100.;const float B=1./A;const float C=1j-3;const float D[552]=float [552](0.,3.,14.,15.,19.,6.,35.,12.,35.,.89990234375,.7998046875,.300048828125,1.,.1500244140625,1.,.7001953125,1.,0.,0.,0.,0.,.25,0.,.114990234375,0.,0.,4.,8.,1.,2.,3.,4.,5.,6.,7.,8.,9.,10.,11.,4.,8.,9.,10.,11.,4.,8.,12.,2.,3.,4.,5.,6.,7.,8.,9.,10.,11.,12.,8.,9.,10.,11.,12.,1.,1.,3.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,2.,4.,4.,4.,4.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,-12.,0.,0.,0.,0.,0.,4.,30.,55.,58.,62.,0.,.25,.5,.75,0.,.125,.25,.375,.625,.75,1.,1.125,1.25,1.375,1.625,1.75,1.875,2.,2.125,2.25,2.375,2.625,2.75,2.875,3.,3.25,3.375,3.5,3.625,3.75,0.,.125,.25,.375,.5,.75,1.,1.125,1.25,1.375,1.5,1.75,2.125,2.25,2.375,2.5,2.625,2.75,3.,3.125,3.25,3.375,3.5,3.625,3.75,0.,2.5,2.5,0.,.25,.5,.75,.0625,.375,.5625,.875,.125,.25,.375,.5,.75,1.,1.125,1.25,1.375,1.5,1.75,1.875,2.,2.125,2.25,2.375,2.5,2.75,2.875,3.,3.125,3.375,3.5,3.625,3.75,4.,.125,.25,.375,.5,.75,1.,1.125,1.25,1.375,1.5,1.75,2.125,2.25,2.375,2.5,2.625,2.75,3.,3.125,3.25,3.375,3.5,3.625,3.75,4.,2.5,4.,4.,.0625,.3125,.5625,.875,3.,3.,3.,3.,14.,26.,29.,14.,14.,17.,14.,26.,29.,14.,14.,17.,29.,14.,26.,29.,14.,26.,29.,14.,17.,17.,19.,16.,14.,12.,45.,50.,53.,45.,48.,57.,45.,48.,52.,53.,52.,43.,50.,53.,45.,52.,55.,52.,45.,48.,41.,45.,43.,41.,40.,26.,24.,36.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,1.,1.,1.,1.,1.,1.,1.,1.,1.,1.,1.,1.,1.,1.,1.,1.,1.,1.,1.,1.,1.,1.,1.,1.,1.,1.,1.,1.,1.,1.,1.,1.,1.,1.,1.,.89990234375,1.,1.,1.,1.,1.,1.,1.,1.,1.,1.,1.,1.,1.,1.,1.,1.,1.,1.,1.,1.,1.,1.,1.,1.,1.,1.,0.,0.,0.,0.,0.,0.,0.,0.,0.,-3.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,2.,0.,0.,-1.,0.,0.,-5.,0.,-1.,-2.,0.,1.,4.,0.,-1.,0.,-2.,-1.,1.,1.,-1.,3.,-2.,1.,1.,1.,-24.,-12.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,1.,0.,0.,0.,0.,0.);float E(float g){return 2./e*atan(g);}float F(float G,float g,float r,float H){return smoothstep(-.00001,g,G)-(1.-H)*smoothstep(0.,r,G-g);}float I(float i,float J,float K,float L,float M,float N,float O){return (i<K?i/K:i<K+L?1:i<K+L+M?(1.-(1.-N)*(i-L-K)/M):i<=J-O?N:i<=J?N*(J-i)/O:0.);}float P(float H,float Q,float K,float R,float S,float M,float T){float U;float V=W(H);H=abs(H);if(H<K)U=R*smoothstep(0.,K,H);else if(H<S)U=S+(R-S)*smoothstep(S,K,H);else if(H<=M)U=H;else if(H<=1.){float X=(H-M)/(1.-M);U=M+(T-M)*(1.5*X*(1.-.33*X*X));}else return 1.;return V*mix(H,U,Q);}float Y(float Z,float aa){if(aa>0.)return abs(aa)*.8*k(Z+.35*k(Z));else return abs(aa)*k(Z+.5*e);}float ab(float G,float ac,float ad,float ae,float af,float ag,float ah,float ai,float aj,float ak,float al,float am,float an,float ao,float ap,float aq){int ar=int (aq);float as=ai*ac*G+ad;float at=aj*ac*G+ad;float au=ak*ac*G+ad;float av=al*ac*G+ad;float aw=0.,ax=0.,ay=0.,az=0.,aA=0.,aB=0.;if(ar==1){ay=1.;az=1.;aB=1.;}else if(ar==2){ax=1.;az=1.;aB=1.;}else if(ar==3){aw=1.;az=1.;aB=1.;}else if(ar==4){ax=1.;ay=1.;aA=1.;aB=1.;}else if(ar==5){aw=1.;aA=1.;aB=1.;}else if(ar==6){ay=1.;az=1.;}else if(ar==7){ay=1.;az=1.;aA=1.;}else if(ar==8){aB=1.;ay=1.;}else if(ar==9){ay=1.;ax=1.;aw=1.;}else if(ar==10){ay=1.;ax=1.;}else if(ar==11){ay=1.;}float aC=ah*k(av+Y(av,ap));float aD=ag*k(au+Y(au,ao)+ay*aC);float aE=af*k(at+Y(at,an)+ax*aC+az*aD);float aF=ae*k(as+Y(as,am)+aw*aC+aA*aD+az*aE);float aG=aF;if(aB>0.)aG+=aE;if(aA+az>0.)aG+=aD;if(aw+ax+ay>0.)aG+=aC;return E(aG);}float aH(float aI,float ac,float aJ,float aK,float aL,float aM,float aN){float aO=0.;float aP=2.*e/aN;float aQ=2.*e*B*(aL-aM);float aR=2.*e*B*(aL+aM);if(aQ<0.)aQ=0.;if(aR>e)aR=e;float aS,aT,U,aU;aN--;for(float V=1.;V<=aN;V++){aT=V-.5*aN;U=.42-.5*cos(aT*aP)-.08*cos(2.*aT*aP);aU=1./(e*aT)*(sin(aT*aR)-sin(aT*aQ));aS=aI-V*B;aO+=U*aU*(2.*fract(ac*aS)-1.);}return E(aN*aN*aO);}float aV(int aW){return D[aW];}int aX=4;int aY=19;int aZ=5;int ba=62;int bb=10;int bc(int bd){return int (aV(bd));}int be(int bd){return int (aV(bd+1+1*aX));}float bf(int bd){return aV(bd+1+2*aX);}float bg(int bd){return aV(bd+1+3*aX);}float bh(int bd){return aV(bd+1+4*aX);}float bi(int bd){return aV(bd+1+5*aX);}float bj(int bd){return aV(bd+1+6*aX);}float bk(int bd){return aV(bd+1+6*aX+1*aY);}int bl(int bd){return int (aV(bd+1+6*aX+2*aY));}float bm(int bd){return aV(bd+1+6*aX+3*aY);}int bn(int bd){return int (aV(bd+1+6*aX+4*aY));}float bo(int bd){return aV(bd+2+6*aX+4*aY+aZ);}float bp(int bd){return aV(bd+2+6*aX+4*aY+aZ+1*ba);}float bq(int bd){return aV(bd+2+6*aX+4*aY+aZ+2*ba);}float br(int bd){return aV(bd+2+6*aX+4*aY+aZ+3*ba);}float bs(int bd){return aV(bd+2+6*aX+4*aY+aZ+4*ba);}float bt(int bd){return aV(bd+2+6*aX+4*aY+aZ+5*ba);}float bu(int bd){return aV(bd+2+6*aX+4*aY+aZ+6*ba);}float bv(int bd){return aV(bd+2+6*aX+4*aY+aZ+7*ba);}vec2 bw(float aI){float bx=0.;float by=0.;float bz=0.;float bA=0.;aI=mod(aI,21.771429);int bB;for(bB=0;bB<s-2&&u[bB+1]<aI;bB++);x=v[bB];y=w[bB];z=t[bB]+(aI-u[bB])*x;float bC=aI-.0002;float bD=1.;float bE,bF,bG,bH,R,bI,bJ,bK,bL,J,aJ,bM,bN,aK,bO,bP,ac,bQ,bR,bS,bT,bU;int bV,bW,bX,bY,bZ,ca,cb,cc,cd,ce,cf;for(int cg=0;cg<aX;cg++){bV=bc(cg);bW=bc(cg+1);ce=be(cg);bO=bg(cg);bP=bh(cg);for(bX=bV;(bX<bW-1)&&(z>bj(bX+1)-bP);bX++);for(bY=bV;(bY<bW-1)&&(z>=bk(bY)+bO);bY++);for(int ch=bY;ch<=bX;ch++){R=z-bj(ch);bZ=bl(ch);ca=bn(bZ);cb=bn(bZ+1);for(cc=ca;(cc<cb-1)&&(R>bo(cc+1)-bP);cc++);for(cd=ca;(cd<cb-1)&&(R>=bp(cd)+bO);cd++);for(int ci=cd;ci<=cc;ci++){if(ce==35){cf=int (bq(ci));bO=bv(cf);}bE=0.;bF=0.;bG=0.;bH=0.;bI=bo(ci)-bP;bJ=bp(ci)+bO;J=bJ-bI;aJ=J*y;bK=R-bI;bL=bK/J;bM=bK*y;bN=bM-.0002;aK=bs(ci);bQ=clamp(1.-br(ci),0.,1.);bR=clamp(1.+br(ci),0.,1.);bT=bt(ci);bU=bu(ci);if(ce==35){bS=bf(cg)*h(bK)*h(J-bK);if(cf==0){bD=min(bD,1.-aK*(clamp(1cj*bK,0.,1.)-pow(bK/(J-bO),8.)));}else if(cf==3){bG=aK*.2*fract(sin(bM*100.*.9)*50000.*.9)*F(bM,.03,.1,.1);bH=aK*.2*fract(sin(bN*100.*.9)*50000.*.9)*F(bN,.03,.1,.1);}bz+=bQ*E(bS*bG);bA+=bR*E(bS*bH);}else {ac=l(bq(ci)+bm(ch));if(abs(bT)>1j-3){float ck=bi(cg);float cl=bT*cm(2.)/12.;if(bK<=ck){float cn=1.-bK/ck;ac*=ck*(n(cl)-cn*n(cl*cn*cn))/bK;}else {ac*=1.+(ck*(n(cl)-1.))/bK;}}bS=h(bK)*(1.-smoothstep(bJ-bO,bJ,R));if(ce==0){bE=k(ac*bM);bF=k(ac*bN);}else if(ce==6){bE=.8*I(bK,J,.001,0.,.1,1.,.3)*(P(f(1.6*ab((bM-0.0*(1.+2.*k(.15*bM))),ac,0.,.00787*127.*pow(aK,12.*7.87e-3),.00787*112.*pow(aK,63.*7.87e-3),.00787*127.*pow(aK,26.*7.87e-3),.00787*96.*pow(aK,120.*7.87e-3),.5,1.,1.5,1.,.00787*0.,.00787*0.,.00787*0.,.00787*50.,8.)),.3,.2,.8,.4,.8,.8)+P(f(1.6*ab((bM-2.0e-03*(1.+2.*k(.15*bM))),ac,0.,.00787*127.*pow(aK,12.*7.87e-3),.00787*112.*pow(aK,63.*7.87e-3),.00787*127.*pow(aK,26.*7.87e-3),.00787*96.*pow(aK,120.*7.87e-3),.5,1.,1.5,1.,.00787*0.,.00787*0.,.00787*0.,.00787*50.,8.)),.3,.2,.8,.4,.8,.8)+P(f(1.6*ab((bM-4.0e-03*(1.+2.*k(.15*bM))),ac,0.,.00787*127.*pow(aK,12.*7.87e-3),.00787*112.*pow(aK,63.*7.87e-3),.00787*127.*pow(aK,26.*7.87e-3),.00787*96.*pow(aK,120.*7.87e-3),.5,1.,1.5,1.,.00787*0.,.00787*0.,.00787*0.,.00787*50.,8.)),.3,.2,.8,.4,.8,.8));bF=.8*I(bK,J,.001,0.,.1,1.,.3)*(P(f(1.6*ab((bN-0.0*(1.+2.*k(.15*bN))),ac,0.,.00787*127.*pow(aK,12.*7.87e-3),.00787*112.*pow(aK,63.*7.87e-3),.00787*127.*pow(aK,26.*7.87e-3),.00787*96.*pow(aK,120.*7.87e-3),.5,1.,1.5,1.,.00787*0.,.00787*0.,.00787*0.,.00787*50.,8.)),.3,.2,.8,.4,.8,.8)+P(f(1.6*ab((bN-2.0e-03*(1.+2.*k(.15*bN))),ac,0.,.00787*127.*pow(aK,12.*7.87e-3),.00787*112.*pow(aK,63.*7.87e-3),.00787*127.*pow(aK,26.*7.87e-3),.00787*96.*pow(aK,120.*7.87e-3),.5,1.,1.5,1.,.00787*0.,.00787*0.,.00787*0.,.00787*50.,8.)),.3,.2,.8,.4,.8,.8)+P(f(1.6*ab((bN-4.0e-03*(1.+2.*k(.15*bN))),ac,0.,.00787*127.*pow(aK,12.*7.87e-3),.00787*112.*pow(aK,63.*7.87e-3),.00787*127.*pow(aK,26.*7.87e-3),.00787*96.*pow(aK,120.*7.87e-3),.5,1.,1.5,1.,.00787*0.,.00787*0.,.00787*0.,.00787*50.,8.)),.3,.2,.8,.4,.8,.8));}else if(ce==12){bE=I(bK,J,.002,0.,.15,.25,.13)*aH(bM,ac,aJ,aK,(2000.+(1500.*k(.25*z))),10.,100.);bF=I(bK,J,.002,0.,.15,.25,.13)*aH(bN,ac,aJ,aK,(2000.+(1500.*k(.25*z))),10.,100.);}bx+=bQ*E(bf(cg)*clamp(bS,0.,1.)*bE);by+=bR*E(bf(cg)*clamp(bS,0.,1.)*bF);}}}}return vec2 (E(.8*(bD*bx+bz)),E(.8*(bD*by+bA)));}void main(){float G=(a+gl_FragCoord.x+gl_FragCoord.y*c)/d;vec2 H=bw(G);vec2 co=floor((0.5+0.5*H)*65535.0);vec2 cp=mod(co,256.0)/255.0;vec2 cq=floor(co/256.0)/255.0;gl_FragColor=vec4 (cp.x,cq.x,cp.y,cq.y);}\0";